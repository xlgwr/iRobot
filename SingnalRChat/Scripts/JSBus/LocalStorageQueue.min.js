var JSBus;(function(n){var i=function(){function n(t){if(this.name=t,!n.hasStorage)throw new Error("Local storage is not enabled in this browser.");}return Object.defineProperty(n.prototype,"queue",{get:function(){var n=JSON.parse(localStorage.getItem(this.name));return n||[]},set:function(n){n&&localStorage.setItem(this.name,JSON.stringify(n))},enumerable:!0,configurable:!0}),n.prototype.add=function(n,i,r){var u=this.queue,f=new t(n,i);r&&(f.lastOperationAt=r.getTime());u.push(f);this.queue=u},n.prototype.remove=function(n){var t=this.removeWhenMatches(function(t){return t.id==n});return t.length?t[0]:null},n.prototype.all=function(){var n=this.queue;return n.map(this.removeMessageContainer)},n.prototype.removeWhereLastOperationOlderThan=function(n){var t=Date.now()-n;return this.removeWhenMatches(function(n){return n.lastOperationAt<t})},n.prototype.removeWhenMatches=function(n){for(var t=this.queue,r=[],i=t.length;i--;)n(t[i])&&(r.push(t[i]),t.splice(i,1));return r.length&&(this.queue=t),r.map(this.removeMessageContainer)},n.prototype.removeMessageContainer=function(n){return n.message},n.hasStorage=function(){try{var n="a";return localStorage.setItem(n,n),localStorage.removeItem(n),!0}catch(t){return!1}},n}(),t;n.LocalStorageQueue=i;t=function(){function n(n,t){this.id=n;this.message=t;this.timestamp=new Date}return n}()})(JSBus||(JSBus={}));
//# sourceMappingURL=LocalStorageQueue.min.js.map